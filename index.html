<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  background:black;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}

#container{
  position:relative;
  width:100%;
  max-width:700px;
}

.layer{
  position:absolute;
  width:100%;
  top:0;
  left:0;
}

.controls{
  position:fixed;
  bottom:20px;
}
button{
  font-size:18px;
  margin:5px;
}
</style>
</head>

<body>

<div id="container">

<img class="layer"
src="https://reg.bom.gov.au/radar/IDR663.background.png">

<img id="radar" class="layer">

<img class="layer"
src="https://reg.bom.gov.au/radar/IDR663.range.png">

</div>

<div class="controls">
<button onclick="dir*=-1">Reverse</button>
<button onclick="speed+=100">Slower</button>
<button onclick="speed=Math.max(100,speed-100)">Faster</button>
</div>

<script>

let frames = [];
let index = 0;
let dir = 1;
let speed = 400;

// keep last few radar frames
function updateFrame(){

  // cache-buster forces newest scan
  const url =
    "https://reg.bom.gov.au/radar/IDR663.T.latest.png?"+Date.now();

  frames.push(url);

  // keep last 6 scans
  if(frames.length > 6)
    frames.shift();
}

// animation loop
function animate(){

  if(frames.length){
    document.getElementById("radar").src =
      frames[index];
  }

  index += dir;

  if(index >= frames.length-1 || index <= 0)
    dir *= -1;

  setTimeout(animate, speed);
}

// grab new radar scan every 5 minutes
updateFrame();
setInt
